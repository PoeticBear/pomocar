<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KH1822KE21"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-KH1822KE21');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Basic SEO Meta Tags -->
    <title>POMODORO CAR - Creative Pomodoro Timer with Driving Animation</title>
    <meta name="description" content="POMODORO CAR is an innovative Pomodoro timer featuring a beautiful night city view and driving car animation. Boost your productivity with this 25-minute focus timer.">
    <meta name="keywords" content="pomodoro timer, productivity tool, focus timer, work timer, POMODORO CAR, creative timer">
    
    <!-- Open Graph Tags for Social Media -->
    <meta property="og:title" content="POMODORO CAR - Creative Pomodoro Timer">
    <meta property="og:description" content="Enhance your work sessions with a beautiful night city view and driving car animation. Make your Pomodoro technique more engaging.">
    <meta property="og:image" content="https://pomodorocar.com/preview-image.jpg">
    <meta property="og:url" content="https://pomodorocar.com/">
    <meta property="og:type" content="website">
    
    <!-- Twitter Card Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="POMODORO CAR - Creative Pomodoro Timer">
    <meta name="twitter:description" content="Enhance your work sessions with a beautiful night city view and driving car animation.">
    <meta name="twitter:image" content="https://pomodorocar.com/preview-image.jpg">
    
    <!-- Additional SEO Meta Tags -->
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://pomodorocar.com/">
    
    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
            background-color: #E1C78F; /* Sand colored background */
        }
        .building {
            position: absolute;
            background-color: #333;
            border: 1px solid #444;
        }
        .window {
            position: absolute;
            background-color: #FFEB3B;
            opacity: 0.7;
        }
        #info {
            position: absolute;
            top: 10px;
            width: 100%;
            text-align: center;
            color: #8B4513; /* Brown color for desert theme */
            font-size: 24px;
            text-shadow: 1px 1px 2px black;
            z-index: 100;
        }
        #home-link {
            position: absolute;
            top: 10px;
            left: 10px;
            padding: 5px 10px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            text-decoration: none;
            border-radius: 5px;
            z-index: 100;
        }
        canvas {
            display: block;
        }
        #timer-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: white;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 20px;
            border-radius: 10px;
            z-index: 200;
        }
        #timer {
            font-size: 48px;
            margin-bottom: 20px;
        }
        #start-button {
            padding: 10px 20px;
            font-size: 18px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        #start-button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <div id="info">POMODORO CAR</div>
    <canvas id="carCanvas"></canvas>
    
    <div id="timer-container">
        <div id="timer">25:00</div>
        <button id="start-button">Start</button>
    </div>

    <script>
        // 获取Canvas元素和上下文
        const canvas = document.getElementById('carCanvas');
        const ctx = canvas.getContext('2d');

        // 设置Canvas大小为窗口大小
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // 汽车属性
        const car = {
            x: -100, // 初始位置在左侧屏幕外
            y: canvas.height * 0.75, // 调整到页面3/4处
            width: 120,
            height: 60,
            speed: 2,
            reachedCenter: false, // 标记汽车是否到达中心位置
            // 抖动相关属性
            shake: {
                amplitude: 1.5, // 抖动幅度
                frequency: 0.2, // 抖动频率
                offset: 0 // 抖动偏移量
            },
            // 车轮旋转相关属性
            wheels: {
                rotation: 0, // 车轮旋转角度
                speed: 0.2 // 车轮旋转速度
            }
        };
        
        // 背景元素 - 高楼大厦
        const buildings = [];
        const numBuildings = 15;
        
        // 沙漠景观元素
        const landscape = {
            dunes: [], // 沙丘
            cacti: [], // 仙人掌
            stars: []  // 星星
        };
        const numDunes = 8;
        const numCacti = 12;
        const numStars = 100;
        
        // 创建沙漠景观
        function createLandscape() {
            // 创建沙丘
            for (let i = 0; i < numDunes; i++) {
                const height = Math.random() * 150 + 100; // 沙丘高度
                const width = Math.random() * 300 + 200; // 沙丘宽度
                landscape.dunes.push({
                    x: i * (canvas.width / (numDunes - 1)) - width/2, // 均匀分布
                    y: canvas.height - height,
                    width: width,
                    height: height,
                    color: '#D2B48C' // 沙色
                });
            }
            
            // 创建仙人掌
            for (let i = 0; i < numCacti; i++) {
                const height = Math.random() * 60 + 40;
                const width = Math.random() * 10 + 15;
                landscape.cacti.push({
                    x: Math.random() * canvas.width,
                    y: canvas.height * 0.75 - height,
                    height: height,
                    width: width,
                    branches: [] // 仙人掌的分支
                });
                
                // 为每个仙人掌添加1-2个分支
                const numBranches = Math.floor(Math.random() * 2) + 1;
                for (let j = 0; j < numBranches; j++) {
                    landscape.cacti[i].branches.push({
                        height: Math.random() * 30 + 20,
                        position: Math.random() * 0.4 + 0.2, // 分支位置（相对高度）
                        side: Math.random() > 0.5 ? 1 : -1 // 分支方向（左/右）
                    });
                }
            }
            
            // 创建星星
            for (let i = 0; i < numStars; i++) {
                landscape.stars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * (canvas.height * 0.6),
                    radius: Math.random() * 1.5 + 0.5,
                    brightness: Math.random() * 0.8 + 0.2
                });
            }
        }
        
        // 绘制沙漠景观
        function drawLandscape() {
            // 绘制天空渐变
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height * 0.75);
            gradient.addColorStop(0, '#1A237E'); // 深蓝色
            gradient.addColorStop(0.3, '#4A148C'); // 紫色
            gradient.addColorStop(0.7, '#E65100'); // 橙色
            gradient.addColorStop(1, '#FFB74D'); // 浅橙色
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // 绘制星星
            landscape.stars.forEach(star => {
                ctx.fillStyle = `rgba(255, 255, 255, ${star.brightness})`;
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
                ctx.fill();
            });
            
            // 绘制沙丘
            landscape.dunes.forEach(dune => {
                ctx.fillStyle = dune.color;
                ctx.beginPath();
                ctx.moveTo(dune.x, canvas.height);
                ctx.quadraticCurveTo(
                    dune.x + dune.width / 2, 
                    dune.y,
                    dune.x + dune.width, 
                    canvas.height
                );
                ctx.fill();
                
                // 添加沙丘阴影效果
                const shadowGradient = ctx.createLinearGradient(
                    dune.x, dune.y, 
                    dune.x + dune.width, dune.y
                );
                shadowGradient.addColorStop(0, 'rgba(0,0,0,0.2)');
                shadowGradient.addColorStop(0.5, 'rgba(0,0,0,0)');
                shadowGradient.addColorStop(1, 'rgba(0,0,0,0.2)');
                ctx.fillStyle = shadowGradient;
                ctx.beginPath();
                ctx.moveTo(dune.x, canvas.height);
                ctx.quadraticCurveTo(
                    dune.x + dune.width / 2, 
                    dune.y,
                    dune.x + dune.width, 
                    canvas.height
                );
                ctx.fill();
            });
            
            // 绘制仙人掌
            landscape.cacti.forEach(cactus => {
                // 主干
                ctx.fillStyle = '#2E7D32';
                ctx.fillRect(cactus.x, cactus.y, cactus.width, cactus.height);
                
                // 主干顶部圆角
                ctx.beginPath();
                ctx.arc(
                    cactus.x + cactus.width / 2,
                    cactus.y,
                    cactus.width / 2,
                    0,
                    Math.PI,
                    true
                );
                ctx.fill();
                
                // 分支
                cactus.branches.forEach(branch => {
                    const branchY = cactus.y + cactus.height * branch.position;
                    const branchX = cactus.x + (branch.side < 0 ? 0 : cactus.width);
                    
                    // 绘制分支
                    ctx.fillRect(
                        branchX, 
                        branchY,
                        branch.side * cactus.width, 
                        cactus.width
                    );
                    
                    // 绘制垂直部分
                    ctx.fillRect(
                        branchX + branch.side * cactus.width - (branch.side < 0 ? cactus.width : 0),
                        branchY,
                        cactus.width,
                        branch.height
                    );
                    
                    // 分支顶部圆角
                    ctx.beginPath();
                    ctx.arc(
                        branchX + branch.side * cactus.width - (branch.side < 0 ? cactus.width : 0) + cactus.width / 2,
                        branchY,
                        cactus.width / 2,
                        0,
                        Math.PI,
                        true
                    );
                    ctx.fill();
                    
                    // 分支连接处的圆角
                    ctx.beginPath();
                    ctx.arc(
                        branchX,
                        branchY + cactus.width / 2,
                        cactus.width / 2,
                        (branch.side < 0 ? 0 : Math.PI / 2),
                        (branch.side < 0 ? Math.PI / 2 : Math.PI),
                        false
                    );
                    ctx.fill();
                });
                
                // 添加暗绿色阴影效果
                ctx.fillStyle = 'rgba(0,50,0,0.5)';
                ctx.fillRect(cactus.x + cactus.width * 0.8, cactus.y, cactus.width * 0.2, cactus.height);
            });
        }
        
        // 移动沙漠景观
        function moveLandscape() {
            if (car.reachedCenter) {
                // 移动沙丘
                landscape.dunes.forEach(dune => {
                    dune.x -= car.speed * 0.5; // 沙丘移动速度较慢，营造远景效果
                    if (dune.x + dune.width < 0) {
                        dune.x = canvas.width;
                    }
                });
                
                // 移动仙人掌
                landscape.cacti.forEach(cactus => {
                    cactus.x -= car.speed;
                    if (cactus.x + cactus.width < 0) {
                        cactus.x = canvas.width;
                        cactus.height = Math.random() * 60 + 40;
                        cactus.y = canvas.height * 0.75 - cactus.height;
                        // 重新生成分支
                        cactus.branches = [];
                        const numBranches = Math.floor(Math.random() * 2) + 1;
                        for (let j = 0; j < numBranches; j++) {
                            cactus.branches.push({
                                height: Math.random() * 30 + 20,
                                position: Math.random() * 0.4 + 0.2,
                                side: Math.random() > 0.5 ? 1 : -1
                            });
                        }
                    }
                });
            }
        }

        // 道路属性
        const road = {
            offset: 0, // 道路偏移量，用于移动道路
            stripeWidth: 40, // 道路标记线宽度
            stripeGap: 60 // 道路标记线间隔
        };
        
        // 绘制道路
        function drawRoad() {
            // 砂石路颜色
            ctx.fillStyle = '#C2B280';
            ctx.fillRect(0, canvas.height * 0.75 + 30, canvas.width, 60);
            
            // 添加道路纹理 - 小坑洼和石头
            // ctx.fillStyle = '#A89968';
            // for (let i = 0; i < 40; i++) {
            //     const x = (i * 50 + (road.offset * 0.5) % 50) % canvas.width;
            //     const width = Math.random() * 15 + 5;
            //     const height = Math.random() * 5 + 2;
            //     ctx.fillRect(x, canvas.height * 0.75 + 35 + Math.random() * 40, width, height);
            // }
            
            // 白色标记线（虚线）
            ctx.fillStyle = '#D8D0C0';
            const totalWidth = road.stripeWidth + road.stripeGap;
            const numStripes = Math.ceil(canvas.width / totalWidth) + 1;
            
            for (let i = 0; i < numStripes; i++) {
                const x = i * totalWidth - (road.offset % totalWidth);
                ctx.fillRect(x, canvas.height * 0.75 + 58, road.stripeWidth, 4);
            }
        }

        // 绘制汽车
        function drawCar() {
            // 计算当前抖动的Y偏移量
            const shakeOffset = car.shake.amplitude * Math.sin(car.shake.offset);
            
            // 车身底部（越野车底盘）
            ctx.fillStyle = '#333333';
            ctx.fillRect(car.x, car.y + 10 + shakeOffset, car.width, car.height / 2);
            
            // 主车身（越野车身体）
            ctx.fillStyle = '#8B4513'; // 棕色 - 适合沙漠环境
            ctx.fillRect(car.x + 10, car.y - 10 + shakeOffset, car.width - 20, car.height / 2 + 10);
            
            // 车顶
            ctx.fillStyle = '#A0522D'; // 深棕色车顶
            ctx.fillRect(car.x + 20, car.y - 25 + shakeOffset, car.width - 45, car.height / 2);
            
            // 车窗（偏蓝色半透明）
            ctx.fillStyle = 'rgba(200, 230, 255, 0.6)';
            ctx.fillRect(car.x + 25, car.y - 20 + shakeOffset, car.width - 70, car.height / 2 - 10);
            
            // 后窗
            ctx.fillStyle = 'rgba(200, 230, 255, 0.5)';
            ctx.fillRect(car.x + car.width - 40, car.y - 20 + shakeOffset, 15, car.height / 2 - 10);
            
            // 前保险杠
            ctx.fillStyle = '#444444';
            ctx.fillRect(car.x, car.y + 15 + shakeOffset, 15, 10);
            
            // 车顶行李架
            ctx.strokeStyle = '#555555';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(car.x + 25, car.y - 28 + shakeOffset);
            ctx.lineTo(car.x + car.width - 45, car.y - 28 + shakeOffset);
            ctx.stroke();
            
            // 绘制三个支撑杆
            for (let i = 0; i < 3; i++) {
                const xPos = car.x + 30 + i * 20;
                ctx.beginPath();
                ctx.moveTo(xPos, car.y - 28 + shakeOffset);
                ctx.lineTo(xPos, car.y - 25 + shakeOffset);
                ctx.stroke();
            }
            
            // 车轮（黑色圆形）- 更大的越野轮胎
            ctx.fillStyle = '#111111';
            
            // 前轮（带旋转）
            ctx.save();
            ctx.translate(car.x + 90, car.y + 35 + shakeOffset);
            ctx.rotate(car.wheels.rotation);
            // 轮胎
            ctx.beginPath();
            ctx.arc(0, 0, 18, 0, Math.PI * 2);
            ctx.fill();
            
            // 轮胎表面花纹
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            for (let i = 0; i < 8; i++) {
                const angle = i * Math.PI / 4;
                ctx.beginPath();
                ctx.moveTo(9 * Math.cos(angle), 9 * Math.sin(angle));
                ctx.lineTo(16 * Math.cos(angle), 16 * Math.sin(angle));
                ctx.stroke();
            }
            
            // 轮毂
            ctx.fillStyle = '#777';
            ctx.beginPath();
            ctx.arc(0, 0, 8, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = '#555';
            ctx.beginPath();
            ctx.arc(0, 0, 5, 0, Math.PI * 2);
            ctx.fill();
            ctx.restore();
            
            // 后轮（带旋转）
            ctx.save();
            ctx.translate(car.x + 30, car.y + 35 + shakeOffset);
            ctx.rotate(car.wheels.rotation);
            // 轮胎
            ctx.beginPath();
            ctx.arc(0, 0, 18, 0, Math.PI * 2);
            ctx.fill();
            
            // 轮胎表面花纹
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            for (let i = 0; i < 8; i++) {
                const angle = i * Math.PI / 4;
                ctx.beginPath();
                ctx.moveTo(9 * Math.cos(angle), 9 * Math.sin(angle));
                ctx.lineTo(16 * Math.cos(angle), 16 * Math.sin(angle));
                ctx.stroke();
            }
            
            // 轮毂
            ctx.fillStyle = '#777';
            ctx.beginPath();
            ctx.arc(0, 0, 8, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = '#555';
            ctx.beginPath();
            ctx.arc(0, 0, 5, 0, Math.PI * 2);
            ctx.fill();
            ctx.restore();
            
            // 车灯（白色椭圆形）
            ctx.fillStyle = '#FFFFDD';
            ctx.beginPath();
            ctx.ellipse(car.x + 5, car.y + 5 + shakeOffset, 4, 6, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // 车灯光效
            const glowGradient = ctx.createRadialGradient(
                car.x + 5, car.y + 5 + shakeOffset, 0,
                car.x + 5, car.y + 5 + shakeOffset, 15
            );
            glowGradient.addColorStop(0, 'rgba(255, 255, 200, 0.8)');
            glowGradient.addColorStop(1, 'rgba(255, 255, 200, 0)');
            ctx.fillStyle = glowGradient;
            ctx.beginPath();
            ctx.ellipse(car.x + 5, car.y + 5 + shakeOffset, 15, 15, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // 后灯（红色）
            ctx.fillStyle = '#FF3333';
            ctx.beginPath();
            ctx.rect(car.x + car.width - 5, car.y + 5 + shakeOffset, 4, 6);
            ctx.fill();
            
            // 沙漠灰尘效果
            if (car.reachedCenter && Math.random() > 0.7) {
                ctx.fillStyle = 'rgba(210, 180, 140, 0.3)';
                for (let i = 0; i < 5; i++) {
                    const dustX = car.x + 10 + Math.random() * 20;
                    const dustY = car.y + 40 + shakeOffset + Math.random() * 10;
                    const dustSize = Math.random() * 8 + 3;
                    ctx.beginPath();
                    ctx.arc(dustX, dustY, dustSize, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
        }

        // 动画状态控制
        let isAnimating = false;
        
        // 动画循环
        function animate() {
            if (!isAnimating) return; // 如果动画未启动，则不执行
            
            // 清除画布
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // 绘制沙漠景观替代原来的建筑
            drawLandscape();
            
            // 绘制道路
            drawRoad();
            
            // 检查汽车是否到达屏幕中间位置
            const centerPosition = canvas.width / 2 - car.width / 2;
            
            if (!car.reachedCenter && car.x < centerPosition) {
                // 汽车还未到达中间，继续向右移动
                car.x += car.speed;
            } else {
                // 汽车已到达中间，标记为已到达中心
                car.reachedCenter = true;
                car.x = centerPosition; // 固定汽车位置在中间
                
                // 移动道路偏移量，创造道路向左移动的效果
                road.offset += car.speed;
            }
            
            // 移动沙漠景观
            moveLandscape();
            
            // 更新汽车抖动效果
            car.shake.offset += car.shake.frequency;
            
            // 更新车轮旋转
            car.wheels.rotation += car.wheels.speed;
            
            // 绘制汽车
            drawCar();
            
            // 继续动画循环
            requestAnimationFrame(animate);
        }

        // 窗口大小调整
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            car.y = canvas.height * 0.75; // 更新汽车垂直位置
            
            // 如果汽车已到达中心，重新计算中心位置
            if (car.reachedCenter) {
                car.x = canvas.width / 2 - car.width / 2;
            }
            
            // 重新创建沙漠景观
            landscape.dunes = [];
            landscape.cacti = [];
            createLandscape();
        });

        // 计时器相关变量和函数
        let timerInterval;
        let totalSeconds = 25 * 60; // 25分钟，以秒为单位
        const timerElement = document.getElementById('timer');
        const startButton = document.getElementById('start-button');
        
        // 更新计时器显示
        function updateTimerDisplay() {
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // 开始计时器
        function startTimer() {
            if (timerInterval) clearInterval(timerInterval);
            
            timerInterval = setInterval(() => {
                if (totalSeconds <= 0) {
                    clearInterval(timerInterval);
                    isAnimating = false; // 停止动画
                    startButton.textContent = 'Restart';
                    return;
                }
                
                totalSeconds--;
                updateTimerDisplay();
            }, 1000);
        }
        
        // 开始按钮点击事件
        startButton.addEventListener('click', () => {
            // 开始动画
            isAnimating = true;
            animate();
            
            // 开始计时器
            startTimer();
            
            // 隐藏计时器容器
            document.getElementById('timer-container').style.opacity = '0.5';
            startButton.textContent = 'Driving...';
            startButton.disabled = true;
        });
        
        // 创建高楼大厦
        createLandscape();
        
        // 初始化场景（但不启动动画）
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawLandscape();
        drawRoad();
        drawCar();
        
        // 初始化计时器显示
        updateTimerDisplay();
    </script>
</body>
</html>